import{_ as s,c as e,o as i,ag as n}from"./chunks/framework.DUQElNkw.js";const u=JSON.parse('{"title":"Database Overview","description":"","frontmatter":{},"headers":[],"relativePath":"database/01_database_overview.md","filePath":"database/01_database_overview.md"}'),t={name:"database/01_database_overview.md"};function l(r,a,p,o,h,c){return i(),e("div",null,[...a[0]||(a[0]=[n(`<h1 id="database-overview" tabindex="-1">Database Overview <a class="header-anchor" href="#database-overview" aria-label="Permalink to &quot;Database Overview&quot;">​</a></h1><h2 id="schema-structure" tabindex="-1">Schema Structure <a class="header-anchor" href="#schema-structure" aria-label="Permalink to &quot;Schema Structure&quot;">​</a></h2><p>SmartGRADE uses a simple, efficient schema with two main tables:</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">erDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    reviews ||--o{ review_pages : contains</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    reviews {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        uuid id PK</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        uuid user_id FK</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        string title</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        string pdf_path</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        timestamp created_at</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        timestamp updated_at</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    review_pages {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        uuid id PK</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        uuid review_id FK</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        int page_number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        string image_path</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        boolean is_rob_graph</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        boolean is_forest_plot</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        timestamp created_at</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h2 id="key-concepts" tabindex="-1">Key Concepts <a class="header-anchor" href="#key-concepts" aria-label="Permalink to &quot;Key Concepts&quot;">​</a></h2><h3 id="reviews-table" tabindex="-1">Reviews Table <a class="header-anchor" href="#reviews-table" aria-label="Permalink to &quot;Reviews Table&quot;">​</a></h3><ul><li>Core entity representing a systematic review document</li><li>Each review belongs to a single user</li><li>Can have an associated PDF document</li></ul><h3 id="review-pages-table" tabindex="-1">Review Pages Table <a class="header-anchor" href="#review-pages-table" aria-label="Permalink to &quot;Review Pages Table&quot;">​</a></h3><ul><li>Individual pages extracted from review PDFs</li><li>Each page can be classified as ROB graph or forest plot</li><li>Page numbers must be unique within a review</li></ul><h2 id="relationships" tabindex="-1">Relationships <a class="header-anchor" href="#relationships" aria-label="Permalink to &quot;Relationships&quot;">​</a></h2><ul><li><strong>One-to-Many</strong>: One review has many pages</li><li><strong>Cascade Delete</strong>: Deleting a review automatically deletes all its pages</li><li><strong>User Scoping</strong>: All data is scoped to the authenticated user</li></ul><h2 id="automatic-features" tabindex="-1">Automatic Features <a class="header-anchor" href="#automatic-features" aria-label="Permalink to &quot;Automatic Features&quot;">​</a></h2><h3 id="timestamps" tabindex="-1">Timestamps <a class="header-anchor" href="#timestamps" aria-label="Permalink to &quot;Timestamps&quot;">​</a></h3><ul><li><code>created_at</code>: Set automatically on insert</li><li><code>updated_at</code>: Updated automatically on any change (reviews table only)</li></ul><h3 id="constraints" tabindex="-1">Constraints <a class="header-anchor" href="#constraints" aria-label="Permalink to &quot;Constraints&quot;">​</a></h3><ul><li>Review titles: 1-500 characters</li><li>Page numbers: Must be positive integers</li><li>Unique constraint: (review_id, page_number) combination</li></ul><h2 id="storage-integration" tabindex="-1">Storage Integration <a class="header-anchor" href="#storage-integration" aria-label="Permalink to &quot;Storage Integration&quot;">​</a></h2><p>Files are organized in Supabase Storage:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>reviews/</span></span>
<span class="line"><span>├── {review_id}/</span></span>
<span class="line"><span>│   ├── document.pdf</span></span>
<span class="line"><span>│   └── pages/</span></span>
<span class="line"><span>│       ├── page_1.png</span></span>
<span class="line"><span>│       ├── page_2.png</span></span>
<span class="line"><span>│       └── ...</span></span></code></pre></div><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li><a href="./02_tables.html">Table Details</a> - Detailed table specifications</li></ul>`,21)])])}const g=s(t,[["render",l]]);export{u as __pageData,g as default};
